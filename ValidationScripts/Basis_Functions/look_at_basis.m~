ccc

N=7;
[N1,lval,x,w,gamma] = leg_quad(N);
% define derivative of polynomials
lp(1,:)=zeros(size(lval(1,:)));
lp(2,:)=ones(size(lp(1,:)));
for i = 3:N1
    n=i-1;
    lp(i,:)=((2*(n)-1)*lval(i-1,:)+lp(i-2,:));
end
lval
lp
% NN=10
% 
% lval(NN,:)
% lp(NN,:)
% 
% plot(x,lval(NN,:),'g','LineWidth',3);
% hold on
% % plot(diff(lval(NN,:))./diff(x'),'r');
% % hold on
% plot(x,lp(NN,:),'LineWidth',3)
% grid on


% Define Basis
for ii=1:N1
    i=ii-1
for jj=1:N1
     j=jj-1;
    


D=zeros(N1);
for ii = 1:N1
    i=ii-1;
    for jj = 1:N1
        j=jj-1;
        if i==j && i==0
            dum=N*(N+1)/4;
        elseif i==j && i>0 && i < N
            dum=0.0;
        elseif i~=j
            dum=lval(end,ii)/(lval(end,jj)*(x(ii)-x(jj)));
        elseif i==j && i==N
            dum=-N*(N+1)/4;
        end
        D(ii,jj)=dum;
    end
end

% K_el=zeros(N1);
% for m=1:N1
%     for n=1:N1
%         el=0;
%         for k=1:N1
%             el=el+D(n,k)*D(m,k)*w(k);
%         end
%         K(m,n)=el;
%     end
% end
% K


% The Assembly
% Nel=2;
% K=zeros((Nel)*(ii)-Nel+1);
% for j = 1:Nel
%     for m=1:ii;
%         row=(ii-1)*(j-1)+m
%         for n = 1:ii;
%             col=(ii-1)*(j-1)+n;
%             K(row,col)=D(m,n)+K(row,col);
%         end
%     end
% end
% K